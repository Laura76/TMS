<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>班级管理</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="./layui/css/layui.css"  media="all">
  <link rel="stylesheet" href="./css/tms.css" media="all"> 
  <script src="./layui/layui.js" charset="utf-8"></script> 
</head>
<body>
  <div class="layui-row tmsrow">
    <div class="layui-col-md9">
      <h1 class="tmstitle">
      <b>XXXX学员管理系统</b>
	  </h1>
    </div>
    <div class="layui-col-md3">
    </div>
  </div>
  <div class="tmsside">
    <ul class="tmsul">
      <li class="tmslicurr"><a class="font" href="/tmsclass">班级管理</a></li>
      <li class="tmsli"><a class="font" href="/tmsteacher">教师管理</a></li>
      <li class="tmsli"><a class="font" href="/tmsstudent">学员管理</a></li>
    </ul>
  </div>
  <div class="tmsbody">
  <form class="layui-form tmsform">
  <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">班级:</label>
      <div class="layui-input-inline">
        <input name="clname" autocomplete="off" class="layui-input">
      </div>
      <label class="layui-form-label">类别:</label>
      <div class="layui-input-inline">
      <select name="caname" lay-filter="aihao">
        <option value="">全部</option>
        <option value="美术">美术</option>
        <option value="音乐">音乐</option>
      </select>
      </div>
      <label class="layui-form-label">教师:</label>
      <div class="layui-input-inline">
        <input name="teacher" autocomplete="off" class="layui-input">
      </div>
      <div class="layui-input-inline">
        <button type="submit" class="layui-btn tmsbutton0" lay-submit="" lay-filter="demo1">查询</button>
      </div>
    </div>
  </div>
  </form>
  <button type="button" class="layui-btn layui-btn-radius tmsbutton1">今日有课</button>
  <button  type="button" class="layui-btn tmsbutton2">新建班级</button>
  <table id="demo" lay-filter="test" class="tmstable"></table>
  </div>
  <script>
  layui.use(['table','form'], function()
	{
	  var table = layui.table;
	  var form=layui.form;
	  var $=layui.jquery;
	  var layer=layui.layer;
	  form.on('submit(demo1)', function(data){
		var submitData=data.field;
		if(submitData.clname==''&&submitData.teacher==''){
			layer.msg('请输入班级或者教师');
			return false;
		}else{
			var urlname='searchClass';
			if(submitData.caname==''){
				urlname='searchAllClass';
			}
			urlname=urlname+"?clname="+submitData.clname+"&teacher="+submitData.teacher;
			table.render({
			    elem: '#demo'
			    ,url:urlname
			    ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
			    ,cols: [
			    	[
			    	{field: 'clname', title: '班级名称'},
			    	{field: 'clenrolment', title: '计划招生人数'},
			    	{field: 'clstarttime', title: '开班时间'},
			    	{field: 'clendtime', title: '结束时间'},
			    ]
			    	]
				,page:true
				,parseData: function(res)
			    {
			    	//res 即为原始返回的数据
			        return {
			          "code": res.state, //解析接口状态
			          "msg": res.error, //解析提示文本
			          "count":res.message.data.length, //解析数据长度
			          "data": res.message.data //解析数据列表
			        };
			      }
			  });
			return false;
		}
	  });
		  
	});
</script>
</body>
</html>